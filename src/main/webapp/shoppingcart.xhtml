<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
  <h:head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="./styles/header.css"/>
    <link rel="stylesheet" href="./styles/general.css"/>
    <link rel="stylesheet" href="./styles/shoppingcart.css"/>
    <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />

    <link rel="icon" type="image/x-icon" href="https://github.com/SantanaQ/Internet-Technologien/blob/main/images/icon.png?raw=true"/>

    <title>Bookshelf - Warenkorb</title>
  </h:head>
  <h:body>
  <!--Anfang Header-->
  <div class="headerr">
    <div class="leftt"></div>
    <div class="items">
      <div class="logo-box">
        <a href="./ProductGroups" method="get">
          <img class="logo" src="https://github.com/SantanaQ/Internet-Technologien/blob/main/images/logo.png?raw=true" alt="logo"/>
        </a>
      </div>
      <div class="buttons">
        <a href="login.html">
          <button class="login">Login</button>
        </a>
        <a href="registration.html">
          <button class="signup">Sign Up</button>
        </a>
        <a href="shoppingcart.xhtml">
          <button class="warenkorb-button"><i class="pi pi-shopping-cart" style="font-size: 2rem"></i></button>
        </a>
      </div>
    </div>
    <div class="rightt"></div>
  </div>
  <!--Ende Header-->


  <div class="main-content">  	
   	<h:form id="form">
	    <div class="warenkorb-ueberschrift-box">
	      <h1>Ihr Warenkorb</h1>
	    </div>
	    <div class="warenkorb-items-box">
	    	<div class="ausgewaehlte-items">
	 				<h:outputText value="Ihr Warenkorb ist aktuell leer..."
						rendered="#{empty cartHandler.books}" />
						
	
					<ui:repeat id="form" value="#{cartHandler.books}" var="item">
						<div class="ware-box">
							<div class="cover-box">
								<div class="shadow-box">
									<h:graphicImage value="data:image/jpg;base64,#{item.buch.b64Cover}" />
								</div>
							</div>
							<div class="infos">
								<h2>#{item.buch.titel}</h2>
								<h3>von #{item.buch.autor}</h3>
								<p>Sofort lieferbar</p>
							</div>
							<div class="preis-box">
								<h:outputText value="#{item.buch.preis}">
									<f:convertNumber type="currency" currencySymbol="€" locale="de-DE"/>
								</h:outputText>
								<div class="anzahl-box">
									<p class="anzahl-title">Anzahl</p>
									<p:commandLink type="button"
										action="#{cartHandler.addAmount(item)}"
										class="anzahl-button"
										update="form">
										<f:ajax execute="@form" render="@form"></f:ajax>
										<center>
											<i class="pi pi-plus"></i>
										</center>
									</p:commandLink>
									<p class="anzahl-title">#{item.anzahl}</p>
									<p:commandLink type="button"
										action="#{cartHandler.reduceAmount(item)}" 
										class="anzahl-button"
										update="form">
										<f:ajax execute="@form" render="@form"></f:ajax>
										<center>
											<i class="pi pi-minus"></i>
										</center>
									</p:commandLink>
								</div>
								<div class="delete-from-shoppingcart">
									<p:commandLink type="button"
										action="#{cartHandler.delete(item)}"
										class="delete-item-button" update="form">
										<f:ajax execute="@form" render="@form"></f:ajax>
										<center>
											<i class="pi pi-trash" style="font-size: 2rem"></i>
										</center>
									</p:commandLink>
								</div>
							</div>
						</div>
					</ui:repeat>
		  	</div>
	      
	      
	      <div class="gesamt">
	        <h2> #{cartHandler.numberItems} Artikel | 				
	        					<h:outputText value="#{cartHandler.total}">
									<f:convertNumber type="currency" currencySymbol="€" locale="de-DE"/>
								</h:outputText>
	        </h2>
	        
	        <a href="checkout-shipping.html">
	          <button class="kasse-button">Zur Kasse</button>
	        </a>
	      </div>
	    </div>
    </h:form> 
  </div>


</h:body>
</html>

